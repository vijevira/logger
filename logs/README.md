
# Logs Directory

This directory contains structured application logs generated by the Winston logger, supporting daily rotation, archival, and multiple log levels.

## 📁 Directory Structure
```
logs/
├── [LOG_FILE]-YYYY-MM-DD.log    # Daily rotated logs (e.g., `svc-2023-08-20.log`)
├── log.txt                      # Combined static log file with all log entries
├── exceptions.log               # Logs unhandled exceptions and crashes
├── errors.log                   # Logs error-level messages only
└── archive/                     # Compressed historical logs (archived older files)
    └── svc-2023-08.tar.gz
```

## ⚙️ Logger Configuration
Your Winston logger is configured with:

- **Daily Rotation**: Creates a new log file daily at midnight  
- **Retention**: Keeps logs for 30 days (`maxFiles: "30d"`)  
- **File Size Limit**: 20 MB per log file (`maxSize: "20m"`)  
- **Compression**: Old logs are compressed (`zippedArchive: true`)  
- **Multiple Log Levels**: Controlled by environment variable `LOGGER_CONFIG` (default: `info`)  
  ```
  SILLY → DEBUG → VERBOSE → INFO → WARN → ERROR
  ```

## 📝 Log Format Example
```
2023-08-20T14:30:00.000Z [INFO] [123e4567-e89b-12d3-a456-426614174000] [app.js] - Application started
2023-08-20T14:30:05.000Z [ERROR] [app.js] - Database connection failed { error: Error: Connection timeout }
```
- Includes timestamp, log level, optional request ID, source file/module, and message.  
- Sensitive fields like passwords and tokens are masked.

## 🛠️ How To Use

### Viewing Logs
```bash
# Tail today's daily rotated log file
tail -f logs/svc-$(date +%Y-%m-%d).log

# Search all error logs recursively
grep -r "ERROR" logs/

# View combined static log file
less logs/log.txt
```

### Environment Variables

| Variable       | Default      | Description                          |
| -------------- | ------------ | ---------------------------------- |
| `LOG_LEVEL`    | `info`       | Set log verbosity (e.g. `debug`)   |
| `LOG_FILE`     | Service name | Base filename prefix for logs       |
| `LOGGER_CONFIG`| JSON string  | Advanced logger config (transports, levels, etc.) |

### Programmatic Usage Example
```javascript
const logger = require('./logger')('module-name');
logger.info('Service started');
logger.error('Operation failed', { error: err });
```

## 🔄 Log Rotation & Maintenance
- Automatic daily rotation and compression handled by Winston.  
- To manually clean old logs (older than 30 days):
```bash
find logs/ -name "*.log" -mtime +30 -exec rm {} \;
```

## 🔐 Security Considerations
- Logs may contain sensitive information; masking is enabled for common secrets.  
- Logs directory is excluded from version control (`.gitignore`).  
- For production, consider setting `LOG_LEVEL=error` to reduce verbosity.

---
